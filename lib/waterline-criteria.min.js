!function(a){function b(a,b){return a?x.filter(a,function(a){return h(a,b)}):a}function c(a,b){if(!b||!a)return a;var c=d(x.clone(a),b);return c}function d(a,b){var c;return a.sort(function(a,d){function f(h,i){return a[h]&&!d[h]?1===i?1:-1:!a[h]&&d[h]?1===i?-1:1:a[h]<d[h]?1===i?-1:1:a[h]>d[h]?1===i?1:-1:b.length?++g>=b.length?0:(c=e(b,g),f(c.key,c.val)):0}var g=0;return c=e(b,g),f(c.key,c.val)}),a}function e(a,b){var c=Object.keys(a)[b];return{key:c,val:a[c]}}function f(a,b){return b&&a?x.rest(a,b):a}function g(a,b){return b&&a?x.first(a,b):a}function h(a,b,c){return!b||x.isEqual(b,{})?!0:x.all(b,function(b,d){return m(a,d,b,c)})}function i(a,b){var c=!1;return x.each(b,function(b){h(a,b)&&(c=!0)}),c}function j(a,b){var c=!0;return x.each(b,function(b){h(a,b)||(c=!1)}),c}function k(a,b){for(var c in b)if(!u(a[c],b[c]))return!1;return!0}function l(a,b){return!h(a,b)}function m(a,b,c,d){if(d){if("equals"===b||"="===b||"equal"===b)return q(a,d,c,y["="]);if("not"===b||"!"===b)return q(a,d,c,y["!"]);if("greaterThan"===b||">"===b)return q(a,d,c,y[">"]);if("greaterThanOrEqual"===b||">="===b)return q(a,d,c,y[">="]);if("lessThan"===b||"<"===b)return q(a,d,c,y["<"]);if("lessThanOrEqual"===b||"<="===b)return q(a,d,c,y["<="]);if("startsWith"===b)return q(a,d,c,r);if("endsWith"===b)return q(a,d,c,s);if("contains"===b)return q(a,d,c,t);if("like"===b)return q(a,d,c,u);throw new Error("Invalid query syntax!")}return"or"===b.toLowerCase()?i(a,c):"not"===b.toLowerCase()?l(a,c):"and"===b.toLowerCase()?j(a,c):"like"===b.toLowerCase()?k(a,c):x.isArray(c)?x.any(c,function(c){return y["="](a[b],c)}):x.isObject(c)&&o(c)?h(a,c,b):q(a,b,c,y["="])}function n(a,b){return x.isString(a)&&x.isString(b)&&(a=a.toLowerCase(),b=b.toLowerCase()),a=a.toString(),b=b.toString(),[a,b]}function o(a){return x.isObject(a)&&(a.not||a.greaterThan||a.lessThan||a.greaterThanOrEqual||a.lessThanOrEqual||a["<"]||a["<="]||a["!"]||a[">"]||a[">="]||a.startsWith||a.endsWith||a.contains||a.like)}function p(a){return Math.pow(+a,2)>0}function q(a,b,c,d){return p(c)&&p(a[b])&&(c=+c,a[b]=+a[b]),x.isUndefined(a[b])?!1:d(a[b],c)?!0:!1}function r(a,b){return v(a,b+"%")}function s(a,b){return v(a,"%"+b)}function t(a,b){return v(a,"%"+b+"%")}function u(a,b){return v(a,b)}function v(a,b){if(x.isRegExp(b));else{if(!x.isString(b))throw console.error("matchString:"),console.error(b),new Error("Unexpected match string: "+b+" Please use a regexp or string.");b=b.replace(/%%%/g,"%"),b=w(b),b=b.replace(/([^%]*)%([^%]*)/g,"$1.*$2");var c="i";b=new RegExp("^"+b+"$",c)}if(x.isNumber(a))a=""+a;else if(x.isBoolean(a))a=a?"true":"false";else if(!x.isString(a))return!1;return a.match(b)?!0:!1}function w(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var x=a._;a.WC=function(a,d){var e="__origindex",h=x.clone(a);x.each(h,function(a,b){a[e]=b}),h=b(h,d.where),h=c(h,d.sort),h=f(h,d.skip),h=g(h,d.limit);var i=x.pluck(h,e);return x.each(a,function(a){delete a[e]}),i};var y={"=":function(a,b){var c=n(a,b);return c[0]==c[1]},"!":function(a,b){var c=n(a,b);return c[0]!=c[1]},">":function(a,b){var c=n(a,b);return c[0]>c[1]},">=":function(a,b){var c=n(a,b);return c[0]>=c[1]},"<":function(a,b){var c=n(a,b);return c[0]<c[1]},"<=":function(a,b){var c=n(a,b);return c[0]<=c[1]}}}(window);